{{- if .Values.secrets.create -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "vexa.fullname" . }}-secrets
  labels:
    {{- include "vexa.labels" . | nindent 4 }}
type: Opaque
stringData:
  # PostgreSQL credentials
  postgres-user: {{ .Values.postgresql.auth.username | quote }}
  postgres-password: {{ .Values.postgresql.auth.password | quote }}

  # Redis credentials
  redis-password: {{ .Values.redis.auth.password | quote }}

  # JWT secret for authentication
  jwt-secret: {{ .Values.secrets.jwtSecret | quote }}

  # RunPod.io credentials for Whisper transcription
  runpod-api-key: {{ .Values.secrets.runpodApiKey | quote }}
  runpod-endpoint-id: {{ .Values.secrets.runpodEndpointId | quote }}

  # OpenAI API key for MCP AI features (optional)
  {{- if .Values.secrets.openaiApiKey }}
  openai-api-key: {{ .Values.secrets.openaiApiKey | quote }}
  {{- end }}

  # Google Meet OAuth credentials (optional)
  {{- if .Values.secrets.googleMeet }}
  google-meet-client-id: {{ .Values.secrets.googleMeet.clientId | quote }}
  google-meet-client-secret: {{ .Values.secrets.googleMeet.clientSecret | quote }}
  {{- end }}

  # Microsoft Teams OAuth credentials (optional)
  {{- if .Values.secrets.teams }}
  teams-client-id: {{ .Values.secrets.teams.clientId | quote }}
  teams-client-secret: {{ .Values.secrets.teams.clientSecret | quote }}
  {{- end }}

  # Zoom OAuth credentials (optional)
  {{- if .Values.secrets.zoom }}
  zoom-client-id: {{ .Values.secrets.zoom.clientId | quote }}
  zoom-client-secret: {{ .Values.secrets.zoom.clientSecret | quote }}
  {{- end }}
{{- end }}
